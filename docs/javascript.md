# Замыкание

Чтобы понять, что такое замыкание, необходимо сначала ознакомиться с понятием **лексического окружения**.

## Лексическое окружение

**Лексическое окружение** — это невидимый (скрытый) объект, присутствующий у любого блока, скрипта или функции в JavaScript. Оно состоит из двух частей:

1. **Объект переменных:**  
   Содержит все переменные, определённые в текущей области видимости.
2. **Ссылка на родительское окружение:**  
   Позволяет функции обращаться к переменным внешней (родительской) области видимости.
   
<div align="center">
  
  <img width="400" alt="Лексическое окружение" src="https://github.com/user-attachments/assets/99f1a6c0-096e-4700-9110-6a59382b8888" />

</div>

---

## Примеры

Ниже приведены примеры, демонстрирующие работу замыкания и лексического окружения.

### Пример 1: Простая функция с замыканием

```javascript
const x = 1;
const logToConsole = function () {
  const i = 'Hi';
  console.log(i);
};

logToConsole();
```

#### Объяснение примера 1

- **Глобальное окружение:**  
  Содержит переменные `x` и `logToConsole`, а также ссылку на родительское окружение (в данном случае — `null`).

- **Локальное окружение (внутри функции `logToConsole`):**  
  Создаётся при вызове функции и содержит переменную `i` со значением `"Hi"`. Это окружение имеет ссылку на глобальное окружение, что позволяет получить доступ к его переменным.

<div align="center">

  <img src="https://github.com/user-attachments/assets/99f1a6c0-096e-4700-9110-6a59382b8888" alt="Лексическое окружение" width="400px" />

</div>

> **Важно!**  
> Локальное лексическое окружение создаётся **только при вызове функции**.

---

## Порядок выполнения кода

1. **Создание глобального окружения:**  
   Изначально создаётся пустое глобальное лексическое окружение.
2. **Инициализация переменной `x`:**  
   В глобальное окружение добавляется переменная `x` со значением `1`.
3. **Определение функции `logToConsole`:**  
   Функция сохраняется в глобальном окружении.
4. **Вызов функции `logToConsole`:**  
   При вызове создаётся новое локальное лексическое окружение.
5. **Инициализация переменной `i`:**  
   В локальном окружении добавляется переменная `i` со значением `"Hi"`.
6. **Вывод в консоль:**  
   Значение переменной `i` выводится в консоль.
7. **Завершение работы функции:**  
   Локальное окружение уничтожается, и управление возвращается в глобальное окружение.
8. **Завершение выполнения скрипта.**

---

## Визуальное представление

Вот как выглядит процесс создания и работы лексических окружений:

<div align="center">

<img src="https://github.com/user-attachments/assets/ff1b03d1-2da7-4df7-93d6-4196c127e972" alt="Визуальное представление" width="400px" />

</div>
